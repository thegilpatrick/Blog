{
  "hash": "0d33c6dc49197175dec37e5e62435344",
  "result": {
    "markdown": "---\ntitle: Neighbor States Grid\ndate: last-modified\nfavicon: thegilpatricklogo.png\nformat:\n  html:\n    code-fold: true\n    toc: true\n    toc-location: left\n    code-tools: true\n    include-in-header: header.html\n--- \n\n\n*Update Header*\n\n \n\n\n```{ojs}\nimport {State_Grid} from \"@scottfranz/neighbor-states-grid\"\n\n\nPlot.plot({\n  width: 1000,\n  height: 1700,\n  x: { axis: null },\n  y: { axis: null },\n  fx: { axis: null },\n  fy: { axis: null },\n  facet: {\n    data: State_Grid,\n    x: \"facet_x\",\n    y: \"facet_y\"\n  },\n  marks: [\n    Plot.cell(State_Grid, {x: \"inner_x\", y: \"inner_y\", fill: d => d.comparison === \"focus\" ? \"yellow\" : \"white\", stroke: \"steelblue\"}),\n    Plot.text(State_Grid, {x: \"inner_x\", y: \"inner_y\", text: d => d.state_initials }),\n  ]\n})\n```\n\n::: {.cell execute='freeze'}\n\n```{.r .cell-code}\nlibrary(tidycensus)\nlibrary(tidyverse)\n\n# census_api_key(\"YOUR KEY GOES HERE\", install = TRUE)\n\n# gets population of each state in 2010 census\nage10 <- get_decennial(\n  geography = \"state\", \n  variables = \"P013001\",\n  year = 2010\n) \n\n# function to make the data usable in Observable JS\nojs_define(example1 = age10) \n```\n:::\n\n```{ojs}\nimport { aq, op } from \"@uwdata/arquero\"\nimport {button} from \"@jeremiak/download-data-button\"\n\n\nage = transpose(example1)\n\nviewof data = aq.from(age).view()\nviewof grid = aq.from(State_Grid).view()\n\ncombine1 = data.join(grid, ['NAME', 'state'])\nstates_pop = combine1.objects()\n\nstates_pop\n\nPlot.plot({\n  width: 1000,\n  height: 1700,\n  x: { axis: null },\n  y: { axis: null },\n  fx: { axis: null },\n  fy: { axis: null },\n  color: {\n    type: \"linear\",\n    range: [\"#79e6df\", \"#515859\"] \n  },\n  facet: {\n    data: states_pop,\n    x: \"facet_x\",\n    y: \"facet_y\"\n  },\n  marks: [\n    Plot.cell(states_pop, {x: \"inner_x\", y: \"inner_y\", stroke: \"black\", fill: d => d.value}),\n    Plot.text(states_pop, {x: \"inner_x\", y: \"inner_y\", text: d => d.state_initials, stroke: \"white\", fill: \"black\" }),\n  ]\n})\n\n```\n\n```{ojs}\nimport {Plot} from \"@mkfreeman/plot-tooltip\"\n\n\nviewof state = Inputs.select(d3.group(states_pop, d => d.state_group), {label: \"State\"})\n\nstateDiff = {for (let i = 0; i < state.length; i++) {\n  let obj = state[i];\n  obj.diff = state[i].value - state[0].value;\n} return state}\n\nstateDiff\n\nPlot.plot({\n  height:600,\n  width:600,\n  color: {\n    type: \"diverging\"\n  },\n  x: {\n    domain: [1,2,3]\n  },\n  y: {\n    domain: [1,2,3]\n  },\n  marks: [\n    Plot.cell(stateDiff, {x: \"inner_x\", y: \"inner_y\", fill: d => d.diff, title: (d) => `${d.diff.toFixed(1)} years`}),\n    Plot.text(stateDiff, {x: \"inner_x\", y: \"inner_y\", text: d => d.state})\n  ]\n})\n\n```\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script type=\"ojs-define\">\r\n{\"contents\":[{\"name\":\"example1\",\"value\":{\"GEOID\":[\"01\",\"02\",\"04\",\"05\",\"06\",\"22\",\"21\",\"08\",\"09\",\"10\",\"11\",\"12\",\"13\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"53\",\"54\",\"55\",\"56\",\"72\"],\"NAME\":[\"Alabama\",\"Alaska\",\"Arizona\",\"Arkansas\",\"California\",\"Louisiana\",\"Kentucky\",\"Colorado\",\"Connecticut\",\"Delaware\",\"District of Columbia\",\"Florida\",\"Georgia\",\"Hawaii\",\"Idaho\",\"Illinois\",\"Indiana\",\"Iowa\",\"Kansas\",\"Maine\",\"Maryland\",\"Massachusetts\",\"Michigan\",\"Minnesota\",\"Mississippi\",\"Missouri\",\"Montana\",\"Nebraska\",\"Nevada\",\"New Hampshire\",\"New Jersey\",\"New Mexico\",\"New York\",\"North Carolina\",\"North Dakota\",\"Ohio\",\"Oklahoma\",\"Oregon\",\"Pennsylvania\",\"Rhode Island\",\"South Carolina\",\"South Dakota\",\"Tennessee\",\"Texas\",\"Utah\",\"Vermont\",\"Virginia\",\"Washington\",\"West Virginia\",\"Wisconsin\",\"Wyoming\",\"Puerto Rico\"],\"variable\":[\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\",\"P013001\"],\"value\":[37.9,33.8,35.9,37.4,35.2,35.8,38.1,36.1,40,38.8,33.8,40.7,35.3,38.6,34.6,36.6,37,38.1,36,42.7,38,39.1,38.9,37.4,36,37.9,39.8,36.2,36.3,41.1,39,36.7,38,37.4,37,38.8,36.2,38.4,40.1,39.4,37.9,36.9,38,33.6,29.2,41.5,37.5,37.3,41.3,38.5,36.8,36.9]}}]}\r\n</script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}